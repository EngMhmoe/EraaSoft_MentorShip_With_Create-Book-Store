import { Link, useNavigate } from "react-router-dom";

//import Imgs
import img1 from "../../../../public/images/img25.png";
import img2 from "../../../../public/images/img36.png";
import img3 from "../../../../public/images/img37.png";
import img4 from "../../../../public/images/img38.png";
import img5 from "../../../../public/images/img39.png";
import img7 from "../../../../public/images/img41.png";
import img8 from "../../../../public/images/img13.png";
import img9 from "../../../../public/images/img42.png";

//import Icons
import { FaCartArrowDown } from "react-icons/fa";
import { useState } from "react";
import { UseTokenStore } from "../../../store/UseTokenStore";
import TooltipAddToCartANDWishList from "../../TooltipAddToCartANDWishList";
import { UseDomainStore } from "../../../store/Domain";

export default function CustomerDetails({ DataCustomerDetails, t }) {
  //State Counter
  const [Counter, setCounter] = useState(1);

  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////

  //Value Token (2)
  const Token = UseTokenStore((stets) => stets.token);

  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////

  //Navigate (3)
  const Navigate = useNavigate();

  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////

  //function AddToCart (4)
  function AddToCart() {
    // alert();
    if (Token) {
      //CheckCarts in LocalStorage (1)
      const CheckCarts = JSON.parse(localStorage.getItem("Carts")) || [];

      //Filter Carts In LocalStorage (4)
      const FilterCartsInLocalStorage = CheckCarts.find(
        (item) => item.documentId === DataCustomerDetails.documentId,
      );

      //is Condition(5)
      if (!FilterCartsInLocalStorage) {
        //NewCarts (2)
        const NewCarts = [...CheckCarts, DataCustomerDetails];

        //Push Carts In LocalStorage (3)
        localStorage.setItem("Carts", JSON.stringify(NewCarts));

        window.location.reload();
      }
    } else {
      //Token !== Navigate To login (1)
      Navigate("/loginIn");
    }
  }

  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////

  //function AddToWishList (5)
  function AddToWishList() {
    //Token === AddToCart
    if (Token) {
      //CheckWishList in LocalStorage (1)
      const CheckWishList = JSON.parse(localStorage.getItem("WishList")) || [];

      //Filter WishList In LocalStorage (5)
      const FilterWishListInLocalStorage = CheckWishList.find(
        (item) => item.documentId === DataCustomerDetails.documentId,
      );

      //is Condition(6)
      if (!FilterWishListInLocalStorage) {
        //NewWishList (3)
        const NewWishList = [...CheckWishList, DataCustomerDetails];

        //Push WishList In LocalStorage (4)
        localStorage.setItem("WishList", JSON.stringify(NewWishList));

        window.location.reload();
      }
    } else {
      //Token !== Navigate To login (1)
      Navigate("/loginIn");
    }
  }

  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////

  //Function WishList Icon Color (6)
  function isWishList() {
    const WishList = JSON.parse(localStorage.getItem("WishList")) || [];

    return WishList.some(
      (item) => item.documentId === DataCustomerDetails.documentId,
    );
  }

  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////////////////////////

  //
  const domain = UseDomainStore((state) => state.domain);

  return (
    <>
      {/* Section Screen ALL  */}
      <section className="container-Cart w-full  ">
        <a
          // href="#"
          class="flex Cart   w-full  bg-neutral-primary-soft border-default rounded-base overflow-hidden"
        >
          {/* Card Imgs */}
          <img
            className="img h-auto max-w-lg md:w-90 sm:w-60 w-90 m-auto transition-all duration-300 rounded-base  hover:blur-none"
            src={domain + DataCustomerDetails?.bookImage?.url}
            alt="image description"
          />

          {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
          {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
          {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
          {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
          {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}

          {/* Card Body */}
          <div class="flex flex-col gap-10 w-full md:px-4  leading-normal">
            {/* (1) */}
            {/* Name , description , Author&&..&&..&&..&&.. , Links */}
            <div className="flex lg:flex-row flex-col justify-between">
              {/* Name , description , Author&&..&&..&&..&&..*/}
              <section className="flex lg:mt-0 mt-7  flex-col gap-3">
                <h5 class=" text-2xl font-bold tracking-tight text-(--color-textColor1)">
                  {t(`${DataCustomerDetails.bookName}`)}
                </h5>

                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}

                <p class=" text-body xl:max-w-190 lg:max-w-140 md:max-w-full font-normal">
                  {t(`${DataCustomerDetails.description}`)}{" "}
                </p>

                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}

                <div className="flex items-center flex-wrap gap-7 mt-2">
                  <h3 className=" font-normal text-[16px]">
                    {t("Author")}:{" "}
                    <div className="font-bold text-(--color-textColor1)">
                      {t(`${DataCustomerDetails.author}`)}
                    </div>
                  </h3>

                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}

                  <h3 className="font-normal text-[16px]">
                    {t("Year")}{" "}
                    <div className="font-bold text-(--color-textColor1)">
                      {t(`${DataCustomerDetails.publicationYear}`)}
                    </div>
                  </h3>

                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}

                  <h3 className="font-normal text-[16px]">
                    {t("Book")}{" "}
                    <div className="font-bold text-(--color-textColor1)">
                      {DataCustomerDetails.quantity} {t("Of")}{" "}
                      {DataCustomerDetails.stock}
                    </div>
                  </h3>

                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}

                  <h3 className="font-normal text-[16px]">
                    {t("Pages")}{" "}
                    <div className="font-bold text-(--color-textColor1)">
                      {DataCustomerDetails.numberOfPages}
                    </div>
                  </h3>

                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}

                  <h3 className="font-normal text-[16px]">
                    {t("Language")}{" "}
                    <div className="font-bold text-(--color-textColor1)">
                      {t(`${DataCustomerDetails.lang}`)}
                    </div>
                  </h3>
                </div>
              </section>

              {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
              {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
              {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
              {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
              {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}

              {/* Links */}

              {/* Screen ALL */}
              <section className="flex lg:mt-0 mt-7 ms-auto  items-center   h-fit gap-8">
                <div className="flex  items-center  h-fit gap-3">
                  <Link
                    to="#"
                    target="_blank"
                    className="hover:bg-[#D9176C]  rounded-full duration-1000 hover:scale-120 w-6 h-6"
                  >
                    <img src={img2} alt="" />
                  </Link>
                  {/*  */}
                  <Link
                    to="#"
                    className=" p-1.5 rounded-full duration-1000 hover:scale-120"
                  >
                    <img src={img3} alt="" />
                  </Link>
                  {/*  */}
                  <Link
                    to="#"
                    className="hover:bg-[#D9176C] p-1.5 rounded-full duration-1000 hover:scale-120 bg-black h-fit"
                  >
                    <img src={img4} alt="" />
                  </Link>
                  {/*  */}
                  <Link
                    to="#"
                    className="hover:bg-[#D9176C] p-1.5 rounded-full duration-1000 hover:scale-120 bg-green-500 h-fit"
                  >
                    <img src={img5} alt="" />
                  </Link>
                </div>
              </section>
            </div>

            {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
            {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
            {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
            {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
            {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}

            {/* (2) */}
            {/* Review && .. */}
            <div className="flex sm:flex-none flex-wrap  items-center justify-between">
              <div className="flex flex-col gap-2">
                <div className="flex items-center gap-2">
                  <div className="rating">
                    <div
                      className="mask mask-star bg-orange-400"
                      aria-label="1 star"
                    ></div>
                    {/*  */}
                    <div
                      className="mask mask-star bg-orange-400"
                      aria-label="2 star"
                    ></div>
                    {/*  */}
                    <div
                      className="mask mask-star bg-orange-400"
                      aria-label="3 star"
                    ></div>
                    {/*  */}
                    <div
                      className="mask mask-star bg-orange-400"
                      aria-label="4 star"
                      aria-current="true"
                    ></div>
                    {/*  */}
                    <div className="mask mask-star" aria-label="5 star"></div>
                  </div>

                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}

                  <p className="text-black/50">
                    ({t("Review")} {t(`${DataCustomerDetails.countReview}`)})
                  </p>
                </div>

                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}

                <p>
                  <h3 className="font-normal text-[16px]">
                    {t("Rate")}:{" "}
                    <span className="font-bold  text-(--color-textColor1)">
                      {DataCustomerDetails.rate}
                    </span>
                  </h3>
                </p>
              </div>

              {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
              {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
              {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
              {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
              {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}

              <div className="ms-auto flex xl:flex-row  flex-col flex-wrap   items-center justify-end   gap-3">
                <section className="flex items-center flex-wrap gap-4">
                  <button className="btn  md:mx-0 mx-auto btn-outline cursor-auto text-[#25D994]">
                    {/*  */}
                    {t("In Stock")}
                    <img src={img7} />
                  </button>

                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}

                  <button className="btn  md:mx-0 mx-auto btn-outline cursor-auto  text-black/60">
                    {t("Free Shipping Today")}
                    <img src={img8} className="w-5" />
                  </button>
                </section>

                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}

                <section className="ms-auto">
                  <button className="btn  md:mx-0 mx-auto btn-outline cursor-auto btn-warning">
                    {t("Discount code")} {DataCustomerDetails.discount}% : Ne212
                  </button>
                </section>
              </div>
            </div>
            {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
            {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
            {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
            {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
            {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}

            {/* (3) */}
            {/* Price && Counter && Add To Card */}
            <div className="flex sm:flex-row flex-col items-center justify-between">
              <section className="flex  me-auto   sm:mb-2 mb-10   items-center justify-end   gap-2">
                <h1 className="text-black/50 text-[17px] line-through">
                  ${DataCustomerDetails.discount}
                </h1>

                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}

                <h1 className="font-bold text-[26px]">
                  $
                  <span className="text-(--color-textColor1)">
                    {t(`${Math.ceil(DataCustomerDetails.final_price)}`)}
                  </span>
                </h1>
              </section>

              {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
              {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
              {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
              {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
              {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}

              <section className="font-bold flex items-center gap-10">
                {/* Counter */}
                <section className="flex items-center gap-6">
                  <button
                    disabled
                    onClick={() => {
                      Counter > 0 && setCounter(Counter - 1);
                    }}
                    className="rounded-full btn  btn-error text-white text-4xl text-center flex items-center justify-center h-8 w-5 pb-2"
                  >
                    -
                  </button>

                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}

                  <h1 className=" font-bold text-2xl">{Counter}</h1>

                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}

                  <button
                    disabled
                    onClick={() => {
                      Counter < 9 && setCounter(Counter + 1);
                    }}
                    className="rounded-full btn  btn-error text-white text-3xl text-center flex items-center justify-center h-8 w-5 pb-1"
                  >
                    +
                  </button>
                </section>

                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}

                <div className="card-actions flex  justify-center items-center gap-4">
                  {/* Add To Cart (1) */}
                  <div className="tooltip">
                    <button
                      onClick={AddToCart}
                      className="flex gap-2.5  items-center bg-(--color-textColor1) text-white w-fit rounded-md py-2 px-4 text-xl cursor-pointer hover:scale-107 duration-1500"
                    >
                      <span className="">{t("Add To Cart")}</span>
                      {/*  */}
                      <FaCartArrowDown />
                    </button>

                    {/* ////////////////////////////////////// */}
                    {/* ////////////////////////////////////// */}

                    {Token && (
                      <TooltipAddToCartANDWishList name={"Add To Cart"} t={t} />
                    )}
                  </div>

                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
                  {/* Add To WishList(2) */}
                  <div className="tooltip">
                    <div
                      onClick={AddToWishList}
                      className={
                        isWishList(DataCustomerDetails.documentId)
                          ? "flex border cursor-pointer rounded-md p-1 border-(--color-textColor1) text-white bg-(--color-textColor1) duration-5000"
                          : "flex border cursor-pointer rounded-md p-1 border-(--color-textColor1) text-(--color-textColor1) "
                      }
                    >
                      {" "}
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        className="inline-block h-8 w-8 stroke-current "
                      >
                        <path
                          strokeLinecap="round"
                          strokeLinejoin="round"
                          strokeWidth="2"
                          d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
                        ></path>
                      </svg>
                    </div>

                    {/* ////////////////////////////////////// */}
                    {/* ////////////////////////////////////// */}

                    {Token && (
                      <TooltipAddToCartANDWishList
                        name={"Add To WishList"}
                        t={t}
                      />
                    )}
                  </div>
                </div>
              </section>
            </div>
          </div>
        </a>

        {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
        {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
        {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
        {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}
        {/* /////////////////////////////////////////////////////////////////////////////////////////////////////////// */}

        <section className=" mt-7 flex items-center  gap-4">
          <img
            className="h-30 w-20 transition-all duration-300  hover:blur-[0px]"
            src={img1}
            alt="image description"
          />

          {/*  */}

          <img
            className="h-30 w-20 transition-all duration-300  blur-[2px] hover:blur-none"
            src={img9}
            alt="image description"
          />

          {/*  */}

          <img
            className="h-30 w-20 transition-all duration-300 blur-[2px] hover:blur-none"
            src={img1}
            alt="image description"
          />
        </section>
      </section>
    </>
  );
}
